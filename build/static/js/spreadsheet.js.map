{"version":3,"sources":["spreadsheet.js"],"names":["i","row","document","querySelector","insertRow","j","letter","String","fromCharCode","charCodeAt","insertCell","innerHTML","DATA","INPUTS","slice","call","querySelectorAll","forEach","element","calculate","token","left","right","value","type","parseFloat","getter","localStorage","id","total","charAt","window","parser","substring","isNaN","onfocus","event","target","onblur","computeAll","Object","defineProperty","get","toLowerCase","exception","socket","io","connect","on","data","console","log","emit"],"mappings":"AAAA,YAAA,KAAK,GAAIA,GAAI,EAAGA,EAAI,EAAGA,IAGtB,IAAK,GAFDC,KAAMC,SAASC,cAAc,SAC/BC,cACOC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC3B,GAAIC,QAASC,OAAOC,aAAa,IAAIC,WAAW,GAAKJ,EAAI,EACzDJ,KAAIS,eACFC,UAAYX,GAAKK,EAAI,cAAgBC,OAASN,EAAI,MACnDA,GAAKM,OAIR,GAAIM,SACAC,UAAYC,MAAMC,KAAKb,SAASc,iBAAiB,SAErDH,QAAOI,QAAQ,SAAUC,GAWxB,QAASC,GAAUC,GAClB,GAAIC,GAAO,EACPC,EAAQ,EACRC,EAAQ,CAEZ,IAAmB,WAAfH,EAAMI,KACTD,EAAQE,WAAWL,EAAMA,WACnB,IAAmB,aAAfA,EAAMI,KAChBD,EAAQX,KAAKQ,EAAMA,WACb,IAAmB,UAAfA,EAAMI,KAChBF,EAAQH,EAAUC,EAAME,OACxBC,EAAwB,MAAhBH,EAAMA,MAAgBE,EAAQ,EAAIA,MACpC,IAAmB,cAAfF,EAAMI,KAChBH,EAAOF,EAAUC,EAAMC,MACvBC,EAAQF,EAAME,MACK,eAAfA,EAAME,OACTD,EAAQF,OAEH,IAAmB,aAAfD,EAAMI,KAChB,OAAQJ,EAAMA,OACd,IAAK,IACL,IAAK,IACJC,EAAOF,EAAUC,EAAMC,MACvBC,EAAQF,EAAME,MAAQH,EAAUC,EAAME,OAAS,EAC/CC,EAAwB,MAAhBH,EAAMA,MAAiBC,EAAOC,EAAUD,EAAOC,CACvD,MACD,KAAK,IACL,IAAK,IACJD,EAAOF,EAAUC,EAAMC,MACvBC,EAAQF,EAAME,MAAQH,EAAUC,EAAME,OAAS,EAC/CC,EAAwB,MAAhBH,EAAMA,MAAiBC,EAAOC,EAAUD,EAAOC,EAIzD,MAAOC,GAGR,QAASG,KACR,GAAIH,GAAQI,aAAaT,EAAQU,KAAO,GACpCC,EAAQ,CACZ,OAAwB,MAApBN,EAAMO,OAAO,IAChBP,EAAQQ,OAAOC,OAAOT,EAAMU,UAAU,IACtCJ,EAAQV,EAAUI,IAKXW,MAAMT,WAAWF,IAAUA,EAAQE,WAAWF,GAxDvDL,EAAQiB,QAAU,SAAUC,GAC3BA,EAAMC,OAAOd,MAAQI,aAAaS,EAAMC,OAAOT,KAAO,IAGvDV,EAAQoB,OAAS,SAAUF,GAC1BT,aAAaS,EAAMC,OAAOT,IAAMQ,EAAMC,OAAOd,MAC7CQ,OAAOQ,cAsDRC,OAAOC,eAAe7B,KAAMM,EAAQU,IACnCc,IAAKhB,IAGNc,OAAOC,eAAe7B,KAAMM,EAAQU,GAAGe,eACtCD,IAAKhB,MAKPK,OAAOQ,WAAc,WACpB,MAAO,YACN1B,OAAOI,QAAQ,SAAUC,GACxB,IACCA,EAAQK,MAAQX,KAAKM,EAAQU,IAC5B,MAAOgB,UASZ,IAAIC,QAASC,GAAGC,QAAQ,wBAGxBF,QAAOG,GAAG,UAAW,SAAUC,GAC9BC,QAAQC,IAAI,aAAcF,GAC1BJ,OAAOO,KAAK,OAAQ,6BAGrBP,OAAOG,GAAG,WAAY,SAAUC,GAC/BC,QAAQC,IAAI,YAAaF","file":"spreadsheet.js","sourcesContent":["for (var i = 0; i < 4; i++) {\n\tvar row = document.querySelector(\"table\")\n\t\t.insertRow(-1);\n\tfor (var j = 0; j < 4; j++) {\n\t\tvar letter = String.fromCharCode(\"A\".charCodeAt(0) + j - 1);\n\t\trow.insertCell(-1)\n\t\t\t.innerHTML = i && j ? \"<input id='\" + letter + i + \"'/>\" :\n\t\t\ti || letter;\n\t}\n}\n\nvar DATA = {};\nvar INPUTS = [].slice.call(document.querySelectorAll(\"input\"));\n\nINPUTS.forEach(function (element) {\n\n\telement.onfocus = function (event) {\n\t\tevent.target.value = localStorage[event.target.id] || \"\";\n\t};\n\n\telement.onblur = function (event) {\n\t\tlocalStorage[event.target.id] = event.target.value;\n\t\twindow.computeAll();\n\t};\n\n\tfunction calculate(token) {\n\t\tvar left = 0;\n\t\tvar right = 0;\n\t\tvar value = 0;\n\n\t\tif (token.type === 'number') {\n\t\t\tvalue = parseFloat(token.token);\n\t\t} else if (token.type === 'cellname') {\n\t\t\tvalue = DATA[token.token];\n\t\t} else if (token.type === 'unary') {\n\t\t\tright = calculate(token.right);\n\t\t\tvalue = token.token === '+' ? right : 0 - right;\n\t\t} else if (token.type === \"leftparen\") {\n\t\t\tleft = calculate(token.left);\n\t\t\tright = token.right;\n\t\t\tif (right.type === 'rightparen') {\n\t\t\t\tvalue = left;\n\t\t\t}\n\t\t} else if (token.type === 'operator') {\n\t\t\tswitch (token.token) {\n\t\t\tcase '+':\n\t\t\tcase '-':\n\t\t\t\tleft = calculate(token.left);\n\t\t\t\tright = token.right ? calculate(token.right) : 0;\n\t\t\t\tvalue = token.token === '+' ? (left + right) : (left - right);\n\t\t\t\tbreak;\n\t\t\tcase '*':\n\t\t\tcase '/':\n\t\t\t\tleft = calculate(token.left);\n\t\t\t\tright = token.right ? calculate(token.right) : 1;\n\t\t\t\tvalue = token.token === '*' ? (left * right) : (left / right);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction getter() {\n\t\tvar value = localStorage[element.id] || \"\";\n\t\tvar total = 0;\n\t\tif (value.charAt(0) === \"=\") {\n\t\t\tvalue = window.parser(value.substring(1));\n\t\t\ttotal = calculate(value);\n\t\t\t//console.log('DATA:', value, total);\n\t\t\t//DATA\n\t\t\treturn total;\n\t\t} else {\n\t\t\treturn isNaN(parseFloat(value)) ? value : parseFloat(value);\n\t\t}\n\t}\n\n\tObject.defineProperty(DATA, element.id, {\n\t\tget: getter\n\t});\n\n\tObject.defineProperty(DATA, element.id.toLowerCase(), {\n\t\tget: getter\n\t});\n\n});\n\nwindow.computeAll = (function () {\n\treturn function () {\n\t\tINPUTS.forEach(function (element) {\n\t\t\ttry {\n\t\t\t\telement.value = DATA[element.id];\n\t\t\t} catch (exception) {\n\t\t\t\t//console.warn('Exception:', exception);\n\t\t\t}\n\t\t});\n\t};\n})();\n\n\n/* eslint-disable */\nvar socket = io.connect('http://localhost:5000');\n/* eslint-enable */\n\nsocket.on('connect', function (data) {\n\tconsole.log('connected:', data);\n\tsocket.emit('join', 'Hello World from client');\n});\n\nsocket.on('messages', function (data) {\n\tconsole.log('messages:', data);\n});\n"],"sourceRoot":"/source/"}